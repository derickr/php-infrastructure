- name: Create local directory to store downloads content
  file:
    state: directory
    dest: "{{ downloads_docroot }}/{{ downloads_domain }}"
    mode: "750"

- name: Copy update-downloads script to the server
  template:
    src: templates/update-downloads
    dest: /local/systems/update-downloads
    mode: "700"

- name: Create a cron job to run hourly
  cron:
    name: Run update-downloads hourly
    special_time: hourly
    job: /local/systems/update-downloads

# The restore role is commented out when initializing the property for the first time
# This can be commented in when backup data is run at least once and available foe restore
# - name: Run restore tasks
#   include_role:
#     name: restore_property
#   vars:
#     property: downloads
#     backup_path: '{{ downloads_home_dir }}'
